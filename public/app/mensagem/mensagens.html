<link rel="stylesheet" href="app/menu/menu-home.css" charset="utf-8">
<link rel="stylesheet" href="app/menu/menu-geral.css" charset="utf-8">
<link rel="stylesheet" href="app/anuncio/anuncio.css" charset="utf-8">
<link rel="stylesheet" href="app/mensagem/chatstyle.css" charset="utf-8">
<div ng-include src="'app/menu/menu3.html'"></div>

<div class="container">
    <div class="row" style="margin-top: 1em;">
        <!-- <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
    </div> -->
        <!-- <a style="position: fixed; z-index: 99; bottom: 1em; left: 1em;" ng-href="#/cadastroanuncio" class="btn btn-warning pull-right pull-right-custom">Criar Novo Anúncio</a> -->

        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" ng-repeat="mensagem in mensagens">
            <div class="col-xs-12">
                <div class="panel panel-primary">
                    <div class="panel-heading" id="accordion{{mensagem._id}}">
                        <span class="glyphicon glyphicon-comment"></span>&nbsp;&nbsp; {{isMyMessage(mensagem.de._id) ? ('Para: ' + mensagem.para.nome) : ('De: ' + mensagem.de.nome)}}
                        <a ng-href="#/anuncio/{{mensagem.anuncio._id}}" style="color: #fff; font-weight: 700; margin-left: 1em;" class="text-center">
                            <!-- <img ng-src="{{mensagem.anuncio.listaArquivos[0].path}}" class="img img-responsive"></img> -->
                            {{mensagem.anuncio.sobreTitulo}}
                        </a>
                        &nbsp;
                        <span ng-show="{{isMyMessage(mensagem.de._id) ? 'mensagem.countNewPara' : 'mensagem.countNewDe'}} " class="badge" style="margin-top: -2px; margin-left: 5px;">+{{isMyMessage(mensagem.de._id) ? mensagem.countNewPara : mensagem.countNewDe}} </span>
                        <!-- <a ng-href="#/anuncio/{{mensagem.anuncio._id}}" class="thumbnail text-center"> -->
                        <div class="btn-group pull-right">
                            <a type="button" class="btn btn-default btn-xs" ng-click="isOpen(mensagem._id);" onclick="return false;" data-toggle="collapse" data-parent="#accordion{{mensagem._id}}" ng-href="#collapseOne{{mensagem._id}}">
                                <span class="glyphicon glyphicon-chevron-down"></span>
                            </a>
                        </div>
                    </div>
                    <div class="panel-collapse collapse" id="collapseOne{{mensagem._id}}">
                        <div class="panel-body">
                            <ul class="chat">
                                <div ng-repeat="texto in mensagem.textos">

                                    <li ng-show="!isMyMessage(texto.usuario._id)" class="left clearfix"><span class="chat-img pull-left">
                  <img ng-src="https://placehold.it/50/55C1E7/fff&text={{texto.usuario.nome[0]}}" alt="User Avatar" class="img-circle" />
                </span>
                                        <div class="chat-body clearfix">
                                            <div class="header">
                                                <strong class="primary-font">{{texto.usuario.nome}}</strong> <small class="pull-right text-muted">
                      <span class="glyphicon glyphicon-time"></span>{{dataAtualFormatada(texto.data);}} atrás</small>
                                            </div>
                                            <p>
                                                {{texto.texto}}
                                            </p>
                                        </div>
                                    </li>

                                    <li ng-show="isMyMessage(texto.usuario._id)" class="right clearfix"><span class="chat-img pull-right">
                  <img ng-src="https://placehold.it/50/FA6F57/fff&text={{texto.usuario.nome[0]}}" alt="User Avatar" class="img-circle" />
                </span>
                                        <div class="chat-body clearfix">
                                            <div class="header">
                                                <small class=" text-muted"><span class="glyphicon glyphicon-time"></span>{{dataAtualFormatada(texto.data);}} atrás</small>
                                                <strong class="pull-right primary-font">{{texto.usuario.nome}}</strong>
                                            </div>
                                            <p>
                                                {{texto.texto}}
                                            </p>
                                        </div>
                                    </li>

                                </div>

                            </ul>
                        </div>
                        <div class="panel-footer">
                            <div class="input-group">
                                <input ng-model="mensagem.resposta" id="btn-input" type="text" class="form-control input-lg" placeholder="Escreva uma mensagem..." />
                                <span class="input-group-btn">
              <button ng-click="responseMessage(mensagem);" class="btn btn-warning btn-lg" id="btn-chat">
                Enviar
              </button>
              </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</div>
</div>


<div ng-include src="'app/rodape/rodape.html'" />
